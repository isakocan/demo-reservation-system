<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>YTÃœ AkÄ±llÄ± HalÄ± Saha</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/static/style.css" />
    <style>
      /* Dinamik JavaScript Badge Stilleri - JS tarafÄ±ndan kullanÄ±ldÄ±ÄŸÄ± iÃ§in burada */
      .weather-small {
        font-size: 0.75rem;
        opacity: 0.8;
        margin-top: 2px;
      }
      .alarm-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background: #ffc107;
        color: #000;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        font-size: 0.7rem;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        z-index: 10;
      }
      .header-alarm-active {
        color: #ffc107 !important;
        transform: scale(1.2);
      }
    </style>
  </head>
  <body>
    <div id="auth-screen" class="container auth-container">
      <div class="card auth-card">
        <div class="auth-header">
          <img
            src="/static/ytu_logo.png"
            alt="YTÃœ Logo"
            style="height: 60px; margin-bottom: 10px"
          />
          <h4>Spor Tesisleri</h4>
          <p class="mb-0 small opacity-75">Online Randevu Sistemi</p>
        </div>
        <div class="card-body p-4">
          <div id="login-form">
            <input
              type="email"
              id="login-email"
              class="form-control mb-3"
              placeholder="E-Posta (@std.yildiz.edu.tr)"
            />
            <input
              type="password"
              id="login-pass"
              class="form-control mb-3"
              placeholder="Åžifre"
            />
            <button
              onclick="login()"
              class="btn btn-primary w-100 py-2 fw-bold"
            >
              GiriÅŸ Yap
            </button>
            <div class="text-center mt-3">
              <small>HesabÄ±n yok mu?</small>
              <a href="#" onclick="toggleAuth()" class="fw-bold">KayÄ±t Ol</a>
            </div>
          </div>
          <div id="register-form" class="d-none">
            <div class="row g-2 mb-2">
              <div class="col">
                <input
                  type="text"
                  id="reg-name"
                  class="form-control"
                  placeholder="Ad"
                />
              </div>
              <div class="col">
                <input
                  type="text"
                  id="reg-surname"
                  class="form-control"
                  placeholder="Soyad"
                />
              </div>
            </div>
            <input
              type="text"
              id="reg-student-id"
              class="form-control mb-2"
              placeholder="Ã–ÄŸrenci No"
            />
            <input
              type="email"
              id="reg-email"
              class="form-control mb-2"
              placeholder="Kurumsal E-Posta"
            />
            <input
              type="password"
              id="reg-pass"
              class="form-control mb-3"
              placeholder="Åžifre"
            />
            <button onclick="register()" class="btn btn-success w-100 py-2">
              KaydÄ± Tamamla
            </button>
            <div class="text-center mt-3">
              <a href="#" onclick="toggleAuth()">GiriÅŸ'e DÃ¶n</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="dashboard" class="d-none">
      <nav
        class="navbar navbar-expand-lg navbar-light bg-white border-bottom px-4"
      >
        <a class="navbar-brand" href="#">
          <img src="/static/ytu_logo.png" alt="Logo" />
          <span class="d-none d-md-inline">YTÃœ Spor</span>
        </a>
        <div class="d-flex align-items-center ms-auto">
          <div class="text-end me-3 d-none d-md-block">
            <div
              id="user-name"
              class="fw-bold text-dark"
              style="font-size: 0.9rem"
            ></div>
            <div
              id="user-role"
              class="badge bg-secondary"
              style="font-size: 0.7rem"
            ></div>
          </div>
          <button onclick="logout()" class="btn btn-outline-danger btn-sm">
            Ã‡Ä±kÄ±ÅŸ
          </button>
        </div>
      </nav>

      <div class="container mt-4">
        <div
          class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2"
        >
          <ul class="nav nav-pills">
            <li class="nav-item">
              <button
                class="nav-link active"
                data-bs-toggle="pill"
                data-bs-target="#tab-calendar"
              >
                <i class="fa-regular fa-calendar-days"></i> Takvim
              </button>
            </li>
            <li class="nav-item">
              <button
                class="nav-link"
                data-bs-toggle="pill"
                data-bs-target="#tab-board"
                onclick="loadBoard()"
              >
                <i class="fa-solid fa-chalkboard-user"></i> Ä°lan Panosu
              </button>
            </li>
          </ul>

          <div
            class="bg-white border rounded p-1 d-flex align-items-center shadow-sm"
          >
            <button
              class="btn btn-sm btn-light text-muted"
              onclick="setTimeGroup('day')"
              id="btn-day"
            >
              <i class="fa-regular fa-sun"></i> GÃ¼ndÃ¼z (12-18)
            </button>
            <div class="vr mx-2"></div>
            <button
              class="btn btn-sm btn-dark"
              onclick="setTimeGroup('evening')"
              id="btn-evening"
            >
              <i class="fa-solid fa-moon"></i> AkÅŸam (18-24)
            </button>
          </div>

          <div class="input-group input-group-sm w-auto shadow-sm">
            <button class="btn btn-light border" onclick="changeDate(-1)">
              <i class="fa-solid fa-chevron-left"></i>
            </button>
            <input
              type="date"
              id="sim-date"
              class="form-control text-center fw-bold"
              style="width: 110px"
              onchange="renderCalendar()"
            />
            <button class="btn btn-light border" onclick="changeDate(1)">
              <i class="fa-solid fa-chevron-right"></i>
            </button>

            <div
              id="admin-panel"
              class="d-none align-items-center ms-3 border-start ps-3"
            >
              <div class="form-check form-switch">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="modeSwitch"
                  onchange="handleModeSwitch()"
                />
                <label
                  class="form-check-label small fw-bold text-muted"
                  for="modeSwitch"
                  id="modeLabel"
                >
                  Kayan Mod
                </label>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-content">
          <div class="tab-pane fade show active" id="tab-calendar">
            <div class="calendar-card bg-white p-0">
              <div class="row g-0" id="calendar-grid"></div>
            </div>
          </div>

          <div class="tab-pane fade" id="tab-board">
            <div class="row">
              <div class="col-md-4">
                <div class="card shadow-sm border-0 mb-3">
                  <div class="card-header bg-primary text-white">
                    <h6><i class="fa-solid fa-plus"></i> Ä°lan Ver</h6>
                  </div>
                  <div class="card-body">
                    <input
                      type="text"
                      id="post-title"
                      class="form-control mb-2"
                      placeholder="BaÅŸlÄ±k (Ã–rn: Kaleci LazÄ±m)"
                    />
                    <textarea
                      id="post-msg"
                      class="form-control mb-2"
                      rows="3"
                      placeholder="MesajÄ±nÄ±z..."
                    ></textarea>
                    <input
                      type="text"
                      id="post-contact"
                      class="form-control mb-3"
                      placeholder="Ä°letiÅŸim (Tel/Insta)"
                    />
                    <button
                      onclick="addPost()"
                      class="btn btn-primary w-100 btn-sm"
                    >
                      YayÄ±nla
                    </button>
                  </div>
                </div>
              </div>
              <div class="col-md-8">
                <div id="board-list" class="row g-3"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="modalReserve" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title">Randevu OnayÄ±</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body text-center">
            <div class="display-6 mb-2">âš½</div>
            <p id="res-detail-text" class="fw-bold"></p>
            <div class="alert alert-light border" id="weather-modal-info"></div>
          </div>
          <div class="modal-footer">
            <button onclick="confirmReserve()" class="btn btn-success w-100">
              Onayla ve Bitir
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="modalAlarm" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-warning">
            <h5 class="modal-title">ðŸ”” Alarm Kur</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <p>
              Bu saat ÅŸu an dolu. Biri iptal ederse anÄ±nda bildirim almak ister
              misin?
            </p>
            <button
              onclick="setAlarm()"
              class="btn btn-outline-dark w-100 mb-2"
            >
              <i class="fa-solid fa-bell"></i> AlarmÄ± Kur
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="modalCancel" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title">Rezervasyonum</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <div class="alert alert-info">
              <strong>Saha No: A-1</strong><br />GiriÅŸte Ã¶ÄŸrenci kimliÄŸinizi
              gÃ¶steriniz.
            </div>
            <small class="text-danger"
              >* MaÃ§a 24 saatten az kaldÄ±ysa iptal edilemez.</small
            >
          </div>
          <div class="modal-footer">
            <button onclick="cancelReservation()" class="btn btn-danger w-100">
              Ä°ptal Et
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="notification-area"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/main.js"></script>
  </body>
</html>
